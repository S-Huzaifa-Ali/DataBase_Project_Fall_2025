{% extends 'store/base.html' %}

{% block title %}Order #{{ order.id }} - ShopHub{% endblock %}

{% block content %}
<style>
    .order-detail-container {
        max-width: 1200px;
        margin: 0 auto;
    }
    
    .btn-back {
        display: inline-block;
        padding: 0.8rem 1.5rem;
        background: #6c757d;
        color: white;
        text-decoration: none;
        border-radius: 25px;
        font-weight: 600;
        transition: all 0.3s ease;
        margin-bottom: 2rem;
    }
    
    .btn-back:hover {
        background: #5a6268;
        transform: translateY(-2px);
    }
    
    .order-header {
        background: white;
        padding: 2rem;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        margin-bottom: 2rem;
        text-align: center;
    }
    
    .order-header h1 {
        font-size: 2.5rem;
        color: #333;
        margin-bottom: 0.5rem;
    }
    
    .order-status-badge {
        display: inline-block;
        padding: 0.5rem 1.5rem;
        border-radius: 25px;
        font-weight: 600;
        font-size: 1.1rem;
        margin-top: 0.5rem;
    }
    
    .status-pending {
        background: #fff3cd;
        color: #856404;
    }
    
    .status-processing {
        background: #cfe2ff;
        color: #084298;
    }
    
    .status-shipped {
        background: #d1ecf1;
        color: #0c5460;
    }
    
    .status-delivered {
        background: #d4edda;
        color: #155724;
    }
    
    .status-cancelled {
        background: #f8d7da;
        color: #721c24;
    }
    
    .order-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        margin-bottom: 2rem;
    }
    
    .info-card {
        background: white;
        padding: 2rem;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }
    
    .info-card h2 {
        font-size: 1.5rem;
        color: #333;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #e0e0e0;
    }
    
    .info-row {
        display: flex;
        justify-content: space-between;
        padding: 0.8rem 0;
        border-bottom: 1px solid #f0f0f0;
    }
    
    .info-row:last-child {
        border-bottom: none;
    }
    
    .info-label {
        font-weight: 600;
        color: #666;
    }
    
    .info-value {
        color: #333;
    }
    
    .shipping-address {
        background: #f8f9fa;
        padding: 1rem;
        border-radius: 10px;
        white-space: pre-line;
        line-height: 1.6;
        color: #555;
    }
    
    .items-card {
        background: white;
        padding: 2rem;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }
    
    .items-card h2 {
        font-size: 1.5rem;
        color: #333;
        margin-bottom: 1.5rem;
    }
    
    .items-table {
        width: 100%;
        border-collapse: collapse;
    }
    
    .items-table thead {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }
    
    .items-table th {
        padding: 1rem;
        text-align: left;
        font-weight: 600;
    }
    
    .items-table th:last-child,
    .items-table td:last-child {
        text-align: right;
    }
    
    .items-table tbody tr {
        border-bottom: 1px solid #e0e0e0;
    }
    
    .items-table td {
        padding: 1.2rem 1rem;
    }
    
    .product-name {
        font-weight: 600;
        color: #333;
    }
    
    .quantity-badge {
        background: #667eea;
        color: white;
        padding: 0.3rem 0.8rem;
        border-radius: 15px;
        font-weight: 600;
        font-size: 0.9rem;
    }
    
    .price {
        color: #28a745;
        font-weight: 600;
    }
    
    .subtotal {
        font-weight: bold;
        color: #333;
    }
    
    .order-total-row {
        background: #f8f9fa;
        font-weight: bold;
        font-size: 1.2rem;
    }
    
    .order-total-row td {
        padding: 1.5rem 1rem !important;
    }
    
    .total-amount {
        color: #28a745;
        font-size: 1.5rem;
    }
    
    @media (max-width: 768px) {
        .order-grid {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="order-detail-container">
    <a href="{% url 'order_list' %}" class="btn-back">‚Üê Back to Orders</a>
    
    <div class="order-header">
        <h1>üì¶ Order #{{ order.id }}</h1>
        <span class="order-status-badge status-{{ order.status }}">
            {{ order.get_status_display }}
        </span>
    </div>
    
    <div class="order-grid">
        <div class="info-card">
            <h2>üìã Order Information</h2>
            <div class="info-row">
                <span class="info-label">Order Date:</span>
                <span class="info-value">{{ order.order_date|date:"F d, Y" }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Order Time:</span>
                <span class="info-value">{{ order.order_date|date:"H:i" }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Payment Method:</span>
                <span class="info-value">{{ order.payment.get_payment_method_display }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Payment Status:</span>
                <span class="info-value">{{ order.payment.get_payment_status_display }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Total Items:</span>
                <span class="info-value">{{ order.items.count }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Total Amount:</span>
                <span class="info-value" style="color: #28a745; font-weight: bold; font-size: 1.2rem;">${{ order.total_amount }}</span>
            </div>
        </div>
        
        <div class="info-card">
            <h2>üìç Shipping Address</h2>
            <div class="shipping-address">{{ order.shipping_address }}</div>
            {% if order.notes %}
            <h2 style="margin-top: 1.5rem;">üìù Order Notes</h2>
            <div class="shipping-address">{{ order.notes }}</div>
            {% endif %}
        </div>
    </div>
    
    <div class="items-card">
        <h2>üõçÔ∏è Order Items</h2>
        <table class="items-table">
            <thead>
                <tr>
                    <th>Product</th>
                    <th style="text-align: center;">Quantity</th>
                    <th style="text-align: right;">Price</th>
                    <th style="text-align: right;">Subtotal</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order.items.all %}
                <tr>
                    <td>
                        <span class="product-name">{{ item.product.name }}</span>
                    </td>
                    <td style="text-align: center;">
                        <span class="quantity-badge">{{ item.quantity }}</span>
                    </td>
                    <td style="text-align: right;">
                        <span class="price">${{ item.price }}</span>
                    </td>
                    <td style="text-align: right;">
                        <span class="subtotal">${{ item.get_subtotal }}</span>
                    </td>
                </tr>
                {% endfor %}
                <tr class="order-total-row">
                    <td colspan="3" style="text-align: right;">Total:</td>
                    <td style="text-align: right;">
                        <span class="total-amount">${{ order.total_amount }}</span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
